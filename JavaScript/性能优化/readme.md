# 性能优化

### 一、删除未使用的js代码
    这是最简单，也是最基础的方法，也是我们在日常开发中应该注意的问题。 这个方法，可以减小js文件的大小，从而缩短首次加载的传输时间，也可以缩短浏览器解析和编译代码所需要的时间。 那什么样的代码我们应该删除呢？

1. 未使用的功能性代码以及与之相关的代码

2. 多余的依赖库

3. 被滥用的npm包

4. 公共模版代码（什么是公共模版代码？就比如我们的脚手架里，又或者咱们从其他项目copy过来的公共方法文件，就会有很多与项目可能无关的代码，那这些东西，就是需要我们删除掉的）


### 二： 
#### 1. 在浏览器中缓存
#### 2. 删除未使用的 JavaScript
如果你检测到一个用户未使用的功能，最好删除所有与之相关的 JavaScript 代码，这样网站的加载速度会更快，用户也会有更好的体验。还有可能，你错误地加入了一个并不需要的库，或者你有依赖项，这些依赖项提供的功能在所有浏览器中原本就有，那么你无需再增加多余的代码。

#### 3. 避免使用太多内存
减少不必要的变量生命

#### 4. 推迟不必要的 JS 加载
用户希望页面快速加载，但并非所有函数都需要在页面的初始加载时就可用。如果用户必须执行某个操作才能执行某个函数（例如，通过单击某个元素或更改选项卡），那么你可以将该函数的加载推迟到初始页面加载之后。通过这种方式，你可以避免加载和编译那些会延迟页面初始显示的 JavaScript 代码。页面完全加载后，我们可以再开始加载这些功能，以便它们在用户开始交互时立即可用。在 RAIL 模型 中，Google 建议将此延迟加载以 50 毫秒为单位进行，这样就不会影响用户与页面的交互。


#### 5. 避免内存泄漏
如果内存正在泄漏，则加载的页面将保留越来越多的内存，并最终占用设备的所有可用内存并严重影响性能。你可能见过此类故障（并且可能对此类故障感到懊恼），例如在带有轮播或图像滑动条的页面上。在 Chrome 开发者工具中，你可以通过在“性能”标签中记录时间线来分析你的网站是否存在内存泄漏。通常，内存泄漏的原因是，你从页面中删除了 DOM，但有一些变量还在引用这些 DOM，因此，垃圾收集器无法消除它们。

#### 6. 适当的使用 Web worker
当你执行耗时很长的代码时，请使用 Web worker。根据 Mozilla 开发人员网络 (MDN) 文档：“Web Worker 可以在与 Web 应用程序的主执行线程分开的后台线程中运行脚本操作。这样做的好处是你可以在一个单独的线程中执行耗时又费力的的处理，同时让主（通常为 UI）线程运行而不被阻塞或减慢。

”Web worker 允许代码执行处理器密集型计算，而不阻塞用户界面线程。Web Worker 允许你生成新线程并将工作委托给这些线程以获得高效的性能。这样，通常会阻碍其他任务且需要长时间运行的任务将被传递给 worker，从而让主线程可以在无阻碍的情况下运行。s

#### 7. 将DOM元素保存在局部变量中
访问 DOM 会很慢。如果要多次读取某元素的内容，最好将其保存在局部变量中。但记住重要的是，如果稍后你会删除 DOM 的值，则应将变量设置为“null”，不然会导致内存泄漏。

#### 8. 优先访问局部变量
JavaScript 首先搜索以查看变量是否存在于本地，然后才在更高级别的作用域内逐步搜索到全局变量为止。将变量保存在本地作用域内能让 JavaScript 更快地访问它们。

局部变量是基于最具体的作用域的，并且可能会穿过多个级别的作用域，因此查找这一动作可能导致出现通用的查询。在一个它前面没有变量声明的局部变量中定义函数作用域时，需要在每个变量之前加上 let 或 const，以便定义当前作用域，防止查找并加速代码执行。

#### 9. 避免使用全局变量
因为脚本引擎在从函数或其他作用域内引用全局变量时需要逐一查看作用域，所以当本地作用域丢失时，该变量将被销毁。如果全局作用域中的变量无法在脚本的生命周期内持续存在，则性能将得到改善。

#### 10. 实施一些优化方案

- 始终使用计算复杂度最低的算法和最佳的数据结构来解决任务。
- 重写算法以获得相同的结果和更少的计算。
- 避免递归调用。给重复的函数加入变量、计算和调用。
- 分解和简化数学公式。
- 使用搜索数组：用它们来获取基于另一个的值，而不是使用 switch/case 语句。
- 使条件总是更有可能为真，以更好地利用处理器的推测执行。
- 如果可以，请使用位级运算符替换某些操作，因为这些运算符的处理周期较短。

#### 11. 使用工具检测问题


来自：
https://www.zhihu.com/question/21217074/answer/760630367